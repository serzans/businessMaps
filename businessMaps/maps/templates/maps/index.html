{% load static %}

<link rel="stylesheet" type="text/css" href="{% static 'maps/style.css' %}" />
<!-- Bootstrap CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

<head>
<script src='https://api.mapbox.com/mapbox-gl-js/v0.32.1/mapbox-gl.js'></script>
<link href='https://api.mapbox.com/mapbox-gl-js/v0.32.1/mapbox-gl.css' rel='stylesheet'/>

</head>


<body>

<h1>{{ test_variable }} (coordinates, type, etc.)</h1>

<div class="jumbotron text-center">
	<h3>Mapping economic activity</h3>
</div>

<div class="container">
	<div class="row">
		<!-- User interface -->
		<div class="col-sm-6">
			<h4>Here goes the UI</h4>

			<ul>
			<li>Allow uploads of GIS files for more custom maps</li>

			<li>Select location (google maps API): searchbar</li>
			<li>Filter which data is included: checkboxes ... find the API's and plot the locations on the map. Use interpolation with weighting to produce heatmaps</li>
			<li>Population density filter: google maps?</li>
			<li>Threshold filters</li>
			<li>Drop-down or similar: Type of business</li>
			<li>Button: show competitors</li>
			</ul>

			<h4>Some general ideas</h4>

			Plot properties available for rent on the map and link to real estate agencies

			Draw correlations between different data

			Find 'CBD' zones

			Core value: find location for business


			<h4>Where to get the API's?</h4>

			4square, Google Maps, Instagram, Flickr
		</div>
		
		<!-- Map -->
		<div class="col-sm-6">
			<div id="map">
			</div>

			<!-- Mapbox API -->
			<script>
			L.mapboxgl.accessToken = '';

			var geojson = {{geojson}} // Retrieve coordinate variable from views.py


			var myLayer = L.mapbox.featureLayer().setGeoJSON(geojson).addTo(mapGeo);
			mapGeo.scrollWheelZoom.disable(); // Plot a layer of queried points
			</script>




<script>
mapboxgl.accessToken = 'pk.eyJ1Ijoic2VyemFucyIsImEiOiJjaXl1ZHVobTEwMDBvMnFycjlzcm9rcXB4In0.upeL8wQ_YbuTjQ8oN1SOFA';
var map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/mapbox/streets-v9',
    center: [{{lng}}, {{lat}}],
    zoom: 15,
});

map.on('load', function () {

    map.addLayer({
        "id": "points",
        "type": "symbol",
        "source": {
            "type": "geojson",
            "data": {
                "type": "FeatureCollection",
                "features": {{geojson}}
                // [{
                //     "type": "Feature",
                //     "geometry": {
                //         "type": "Point",
                //         "coordinates": [-77.03238901390978, 38.913188059745586]
                //     },
                //     "properties": {
                //         "title": "Mapbox DC",
                //         "icon": "monument"
                //     }
                // }, {
                //     "type": "Feature",
                //     "geometry": {
                //         "type": "Point",
                //         "coordinates": [-122.414, 37.776]
                //     },
                //     "properties": {
                //         "title": "Mapbox SF",
                //         "icon": "harbor"
                //     }
                // }]
            }
        },
        "layout": {
            "icon-image": "{icon}-15",
            "text-field": "{title}",
            "text-font": ["Open Sans Semibold", "Arial Unicode MS Bold"],
            "text-offset": [0, 0.6],
            "text-anchor": "top"
        }
    });
});
</script>

			

		</div>
	</div>
</div>




</body>
